<dl class="portlet portletExamplePortlet"
    i18n:domain="pleiades.portlet.flickr">

    <dt class="portletHeader">
        <span class="portletTopLeft"></span>
        Photos from Flickr
        <span class="portletTopRight"></span>
    </dt>

    <dd class="portletItem odd">
      <a id="flickr-portrait-link" href="" style="display:none"><img width="180" id="flickr-portrait" src="" title=""/></a>
      <p id="flickr-portrait-attribution" style="display:none"></p>
      <p id="flickr-portrait-loading">Loading...</p>
      <p id="flickr-portrait-tip" style="display:none">This place has no portrait photo. One from the list of related photos could be suggested for the <a href="http://flickr.com/groups/1876758@N22/">Pleiades Places" group on Flickr</a>.</p>
    </dd>

    <dd class="portletFooter">
        <a id="flickr-photos-link" href="#"><span id="flickr-photos-count">0</span> related photos...</a>
    </dd>

<script type="text/javascript">
<!--
  
  function queryFlickr() {
    jq.ajax({
      "url": document.baseURI + "/@@flickr-tagged",
      "success": function (data) {
        jq("#flickr-photos-count").html(data['related']['total']);
        jq("#flickr-photos-link").attr("href", data['related']['url']);
        if (data['portrait'] == null) {
          jq("#flickr-portrait-loading").hide();
          jq("#flickr-portrait-tip").show();
        }
        else {
          jq("#flickr-portrait").attr("src", data['portrait']['img']);
          jq("#flickr-portrait").attr("title", data['portrait']['title']);
          jq("#flickr-portrait-link").attr("href", data['portrait']['page']);
          jq("#flickr-portrait-attribution").html(data['portrait']['title']);
          jq("#flickr-portrait-loading").hide();
          jq("#flickr-portrait-link").show();
          jq("#flickr-portrait-attribution").show();
        }
      },
      "error": function (req, status, err) {
        alert(err);
      }
    });
  }

  jq(document).ready(queryFlickr);

  -->
</script>

</dl>
